vim:set nowrap:

Tapes :

- C_Deb_Pas		installed (C). Debugger? Pascal?
- OS32_Pascal		installed: pascal compiler.
- FortranVII		installed: development and optimising compiler
- UnvFortrSwPkg		universal Fortran compiler

- sortMergeII		reads ok, but implies COBOL
- DMS32			reads ok, but implies COBOL, possibly Fortran
- OS32Medit		reads ok, needs terminal config
- IUG tapes		software tools works, lots of things don't (3200?)

- sort-merge		does not read
- COBOLupgrd		does not read

Tips/quirks :

- MTM copy, rename, etc. cannot "see" file with /99 type account ref.

- Use SET PRIVATE and SET GROUP to switch accounts, and to copy files
  between accounts.


$DEFINE command:

 (Gleaned mostly from reading CSS files)

- $DEF 1,<NAME>,ST( )         give variable a name (must be uppercase)
- $DEF 1,,ST(Hello world)     string value
- $DEF 1,,ST(@1) LD0 ST(@2)   null coalescing
- $DEF 1,,CUR(USER)           MTM user name (process name)
- $DEF 1,,CUR(EOT)            current PREVENT/ENABLE PROMPT
- $DEF 1,,CUR(PRIV)           current SET PRIVATE account
- $DEF 1,,CUR(GROUP)          current SET GROUP account
- $DEF 1,,CUR(CSS)            current SET CSS account
- $DEF 1,,DVOL(SYS)           default volume for /s
- $DEF 1,,VOL(FD)             volume component of file name
- $DEF 1,,FILE(FD)            name component of file name
- $DEF 1,,EXT(FD)             extension component of file name
- $DEF 1,,ACC(FD)             account component of file name
- $DEF 1,,REQ(COOKIE)         GIVE COOKIE (must be uppercase)
- $DEF 1,,HC(4000-@2)         hexadecimal computation

- $DEF 1,,ST(@@=/I.NPLACE/) LD2 ST(OFF) GO0 CL(T) ST(ON)

  Keyword argument I(NPLACE)=1, double 'at' for up a CSS level.
  LD2 ?
  GO0 ?
  CL(T) ?

  (MTMMAC.TSK hexdump record 200)

- $DEF 1,,DC(4000-@2)         decimal computation exists, but does it work?
- $DEF 1,,UPPER(@*1)          convert string to uppercase
- $DEF 1,,LOWER(@*1)          convert string to lowercase

- $DEF G8,SILENT,ST(@*G8) LD2 ST(1) GO0 CL(T)

  - ternary: IF @*G8 not set THEN STRING(1) ELSE CLEAR(T)

  (MTMMAC.TSK hexdump records 199-200)

- VOLUMENAME(fd)                  filename components
- FILENAME(fd)                            "
- EXTENSION(fd)                           "
- ACCOUNT(fd)                             "
- DVOLUMENAME(SYS|CSS)            SET VOLUME or SET CSS names
- CURRENT                         see below
- HCOMPUTE(expr)                  hexadecimal calculation
- DCOMPUTE(expr)                  decimal calculation
- DHCONVERT(dec)                  dec to hex conversion
- HDCONVERT(hex)                  hex to dec conversion
- UPPERCASE(@1)                   convert string to upper
- LOWERCASE(@1)                   convert string to lower
- LENGTH(@1)                      string length
- REQUIRED(<SOMETHING>)           GIVE SOMETHING (must be uppercase)
- STRING(hello world)             string literal
- SEARCH, POSITION, SUBSTRING     string functions (see below)

  (Some special semantics here: L/T, D/U, and CLEAR with T/L.)

- CLEAR(L)                        unset a variable
- CLEAR(T)                        unset a variable
- LD, TD, LU, TU, GO              logical operators, with digit suffix

  (MTMMAC.TSK hexdump record 204)

- CURRENT(PRIVATE|GROUP|CSS)      SET PRIVATE, GROUP, CSS accounts
- CURRENT(USERNAME)               username (MTM session name)
- CURRENT(INTERACTIVE)            terminal id
- CURRENT(BATCH)                  always returns null in interactive
- CURRENT(DATE|TIME)              current date or time
- CURRENT(EOT)                    exit status of last task

- See also "Utilisation of Perkin-Elmer Operating System Features" table
  2 (p22) for $IF operators.


Quirky $DEFINE syntax for string functions:

  (Found in IUG-161 OS/32 AND UTILITY DEVELOPMENT CSS PROCEDURES.
   Match parameter against a list of values, note strange delimiters.)

    $DEF 1,,SEARCH('#',ONE'TWO'THREE'FOUR'FIVE,@1)
    $IFNNULL @*1
       $WRITE PARAMETER 1 IS VALID, MATCHES '@*1'
    $ELSE
       $WRITE PARAMETER 1 INVALID
    $ENDC

  (Referred to in MTM Software Installation Guide, examples found in
   IUG-161. Similarly quirky: note required terminator char '#' after
   param 2 of substr.)

    $DEF 1,,STR(Hello world!)
    $DEF 2,,SUBSTR('#',@*1#,7,5)
    $WRITE '@*1' SUSTRING RETURNS '@*2'

  (Also in mentioned in MTM Software Installation Guide. Examples in
   IUG-192 HERCULES UTILITIES. Note again requires you to specify a
   terminator character.)

    $DEF 1,,POSITION('#',:#,@1#)    ;* find position of colon
    $DEF 2,,SUBSTR('#',@1#,0,@*1)   ;* extract device from before colon

   ***
   *** Do not use spaces after commas, because they are interpreted as
   *** part of the string to search!
   ***
   *** SEARCH p2 list must be uppercase. SUBSTR and POSITION p2 need not
   *** be a variable, may be uppercase or lowercase string literal. Just
   *** don't include quotes or STRING operator, just text and the required
   *** terminator character.
   ***


'Undocumented' MTM commands:

  (Probably in the missing MTM manuals, but I got these from the IUG-104
   LIBTOOLS tape. Much more readable than the $DEFINE command.)

    $LOCAL @name(length), @nam2(length), ...    (lowercase is ok)
    $SET @name = world                          (lowercase is ok)
    $WRITE Hello @name

  (But also note syntax for using IV/GV names, see IUG-118 HANDY CSS'S)

    $define 1,HELLO,str(Hello world!)
    $define g9,NINES,str(9999)
    $display ivars
    $write greet='@*/HELLO/'   ;* internal variable (implicit)
    $write greet='@*i/HELLO/'  ;* internal variable (explicit)
    $write nines='@*g/NINES/'  ;* global variable (requires explicit)

  ('Keyword arguments', examples in IUG-118, IUG-161.)

    $define 1,,str(@=/OPT/)       returns value if OPT=value is passed
                                  on the command line, null if option is
                                  absent
    $define 2,,str(@=/O.PTION/)   dot allows keyword to be abbreviated

    $ifnnull @=/OPT/
       $write OPT present: '@=/OPT/'
    $else
       $write OPT absent
    $endc

    Positional parameters must come BEFORE any keyword arguments. If you
    pass a positional parameter after a keyword argument, you'll get a
    KEYW-ERR and a slightly confusing explanation.


MTM operator commands:

  (MTMMAC.TSK hexdump record 3)

- .mtm add <tt>                   enable terminal
- .mtm broadcast <message>        send message to all logged-in users
- .mtm message <user> <message>   send message to single user
- .mtm inquire                    report batch status
- .mtm purge <fd>                 remove batch job
- .mtm submit <td>                submit batch job
- .mtm remove <tt>                disable terminal
- .mtm terminate <tt>             kick user off
- .mtm quiesce                    no more logins, end MTM when all off
- .mtm status                     report interactive and batch status
- .mtm atf <fd>                   ?
- .mtm psm                        PSM scheduler, needs to be SYSGEN'd in
- .mtm lle                        3200 only, and requires PSM


Some more clustered MTM strings:

- MTMMAC.TSK hex record 203: SYSTEM, SPOOL, ROLL, TEMP, PRIVATE, CSS.

  Looks like disks or accounts for certain files (ROLL=swap).


MTM ACTUTY commands:

    (ACTUTY.TSK hexdump record 3)

- ACCOUNTS  [maxnum]
- ADD       act,grp,pass,name,*,*,priv
- CHANGE    act,[grp],[pass],[name],,,[priv]
- PRIVILEGE [act[,priv]]
- DELETE    act
- LIST      [act]
- MODE      [CREATE|UPDATE|REPORT]
- TOTAL                           (in MODE REPORT only)
- PAUSE                           (type CONT to return)
- END


LIBLDR commands:

    (LIBLDR.TSK hexdump records 30-31)

- PB, LC, BC, TO, BI, XO, GO, EN, PA, OU, RO, MA, AM, LI, LO
  LF ,ED, RW, FF, BF, FR, BR, WF, FI, LA, DU, CO, TA, LG


BREAK :

- Hit telnet escape char, Ctrl/]
- Type SEND BRK.
- Wait for asterisk prompt.
- Type CANCEL.


SIGNON :

- SIGNON name,account,password.
- Ctrl/E before password disables echoing during password.
- Or type SIGNON without parameters for dialog version.

  - USERID is a unique session name (your alias).
  - ACCOUNT is the numeric account. Who you *really* are.
  - PASSWORD is your password.
  - ENVIRONMENT is the name of a CSS to run instead of USERINIT.

- SIGNON without parameters does not echo USERID or PASSWORD.


MTM privileges :

  (Referred to in literature.)

- SET GROUP
- SET PRIVATE
- EXTENDED ACCOUNT ACCESS
- PRIVILEGED

  (Trial and error, using MTM PRIVILEGE command)

- 0000  no privileges             -- bog standard user
- F...  can run private CSS       -- good for isolated developer
- .F.,  SET PRIVATE and SET GROUP -- extended account access (can do damage)
- ..F.  privileged?               -- can do serious damage
- ...F  another privilege?        -- can do serious damage
- FFFF  every privilege           -- can do serious damage

 The useful ones seem to be:

 0      bog standard user, can write code, but not own CSS
 f000   isolated developer limited to private account, with CSS
 ff00   system programmer with extended account access, dangerous
 fff0   full privileges, not recommended

 Also note left nybble:

 0ff00  isolated developer as above, cannot edit /S files, but can SET
        PRIVATE and then edit them as if private (like sudo)
 ff000  no SET PRIVATE, but can edit /S files directly, dangerous.

- Others? Which bits mean what? Can SET PRIVATE and SET GROUP be decoupled?


FORTRAN VII inline assembly:

- See IUG-214 MULTI FILE SEARCH.
- Also has a wildcard matcher / directory reader without using CSS.


FASTCHEK strings, possible start options?

- CHECK
- CLOSE
- CLOSEONLY
- COMMAND
- DIRECTORY
- END
- EXTENDALLOWED
- FILL
- INITIALISE/INITIALIZE
- KEEPSPOOL
- LIST
- NO
- NOREADCHECK
- NOWRITERECOVERY
- READCHECK
- RENAME
- REPORTONLY
- TBLOCKS
- VOLUME
- WRITERECOVERY
- YES


Some preinstalled programs :

- ECM: Environment Control Manager
- VCF: Virtual Console Faciltiy
- FXH: Series 7000/3200 File Transfer Handler
- IPCARCH: IPC Archive Utility
- MLU32: Macro Library Utility


Problems :

- MTM seems to do a lot of "busy work". CPU usage can get quite high
  after a while.

